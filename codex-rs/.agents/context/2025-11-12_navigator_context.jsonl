{"source":"navigator search (profiles=symbols, wait=false)","summary":["Запрос \"nonexistentpattern\" вернул response с query_id и подробной диагностикой индекса в состоянии ready.","Покрытие показало auto_indexing=true и список пропущенных файлов (oversize/no_symbols), что подтверждает корректную инициализацию индекса перед тестами."],"citation":"query_id:4b1e9c19-7f52-4ca3-b266-76f6354e2126"}
{"source":"navigator refine search","summary":["Повторный запрос с refine=4b1e9c19-7f52-4ca3-b266-76f6354e2126 вернул набор документов и отметку smart_refine=true.","Это подтверждает работу механизма перескоринга без повторной индексации и экономию времени при уточнении запросов."],"citation":"query_id:0885388e-841e-4701-ad98-cdc61956f0c8"}
{"source":"navigator search with filters","summary":["Попытка использовать paths_include_glob вернула нужные символы, но hints сообщили \"ignored unsupported keys: paths_include_glob\", что выявляет ограничение API.","categories=[\"tests\"], languages=[\"python\"], kinds=[\"struct\"], recent_only=true продемонстрировали корректную фильтрацию и сообщения об откатах (\"no recent hits; showing full index\")."],"citation":"query_id:bf572f1d-9137-437f-ba38-e495b0c782b9; query_id:025c4ffc-2927-473f-8493-79fb06f2e3ac"}
{"source":"navigator content commands","summary":["Команды open e3763710fcef2590 и snippet 24a646091b0843b1 вернули диапазоны файлов и выдержки, подтверждая возможность контекстного чтения без перехода в редактор.","snippet позволил задать context=12 и вернуть точный блок с формат! строками, что полезно при ревью без открытия файла целиком."],"citation":"id:e3763710fcef2590; id:24a646091b0843b1"}
{"source":"cli/src/code_nav.rs + tui/src/chatwidget.rs","summary":["CLI/TUI now render SearchStreamEvent diagnostics/top_hits in real time, so exec cells show live heartbeats and references split into definitions/usages without waiting for the final JSON.","refs_mode travels through the planner so agents can request definitions-only/usages-only references, and literal stats (missing trigrams, pending paths, scanned files/bytes) surface fallback workload directly in stats/diagnostics."],"citation":"cli/src/code_nav.rs; tui/src/chatwidget.rs; navigator/src/index/search.rs"}
{"source":"navigator health telemetry","summary":["Ввели HealthStore (телеметрия ingest + literal) c persisted snapshot: фиксируем длительность full/delta прогонов, причины skip и literal fallback/scan статистики, а diagnostics теперь отдаёт risk/issues для каждого поиска.","`navigator doctor` печатает новую health-panel (risk, remediation, literal долю, последние ingest) с опцией `--json`, что избавляет от ручного анализа coverage; документация обновлена."],"citation":"navigator/src/index/health.rs; navigator/src/index/mod.rs; cli/src/code_nav.rs; docs/navigator.md"}
{"source":"literal search resilience","summary":["IndexBuilder now fills trigram_to_files during initial builds and literal_search first consults token_to_files, so CODEX_SANDBOX-style literal queries reliably return literal:: hits instead of scanning arbitrary files.","Fallback hits obey the same no-filter contract as literal fallback and JSON payloads accept paths_include_glob/path aliases without emitting \"ignored unsupported keys\" hints."],"citation":"navigator/src/index/builder.rs; navigator/src/index/search.rs; navigator/src/index/mod.rs; navigator/src/freeform.rs"}
{"source":"codex nav --format text","summary":["`--format text` now emits a compact summary (diagnostics, stats, top hits with ids) so Codex agents don't need to scroll through hundreds of JSON lines.","Tests cover the new mode via `navigator_nav_text_format_outputs_summary`, ensuring the CLI outputs the textual banner instead of braces."],"citation":"cli/src/code_nav.rs; cli/tests/navigator_nav.rs"}
{"source":"navigator search \"struct App\"","summary":["Cross-crate struct lookup returned hits from core, tui, cloud-tasks, and apply-patch with candidate_size=267 in ~100ms, showing balanced profile breadth.","Diagnostics reported index_state=ready and auto_indexing=true with the expected skipped files list, so baseline index health is confirmed before deeper tests."],"citation":"query_id:5ef96f9c-a060-4b59-88b2-f9a10a2ac0bb"}
{"source":"navigator literal search (\"Рабочий цикл\")","summary":["Literal fallback scanned 64 files/392KB in 5.3ms when Cyrillic trigrams were missing, exposing literal_missing_trigrams entries for UTF-8 tokens.","Query produced no hits but stats.literal_candidates + diagnostics explain why, proving fallback telemetry is actionable."],"citation":"query_id:d064a8d3-a7bc-496f-bff4-e1ca7e3fef9c"}
{"source":"navigator open/snippet AppEventSender","summary":["open id 11fc384c48ec0e1f streamed the struct definition plus send() implementation without touching the editor, validating quick context retrieval.","snippet on the same id with context=16 trimmed the preview yet preserved doc comments, which is ideal for lightweight reviews."],"citation":"id:11fc384c48ec0e1f"}
{"source":"navigator stream events","summary":["Stream chunks now travel as structured ToolEvent content items instead of re-stringified JSON, so the tool handler and TUI can deserialize `SearchStreamEvent` without extra parsing.","TUI prefers these ToolEvent payloads but still falls back to legacy strings, keeping backwards compatibility during rollout."],"citation":"core/src/tools/handlers/navigator.rs; tui/src/chatwidget.rs; protocol/src/models.rs"}
{"source":"navigator rename","summary":["Весь Code Finder стек переименован в Navigator: crate `codex-navigator`, CLI подкоманда `codex navigator`, TUI/Navigator индикаторы, handler и документация.","Потоковые события теперь сериализуются как ToolEvent для navigator, поэтому агенты получают структурированные chunks без парсинга строк."],"citation":"navigator/src/lib.rs; cli/src/code_nav.rs; core/src/tools/handlers/navigator.rs; docs/navigator.md"}
{"source":"atlas summary core","summary":["Команда `codex navigator atlas --summary core` вывела компактный отчёт: core=182 файлов, 2 649 символов, 65.7k LOC и топ-узлы src/tests/templates, что подтверждает работоспособность атлас-сводок."],"citation":"shell#target/debug/codex navigator atlas --summary core"}
{"source":"atlas tree tui","summary":["`codex navigator atlas tui` выводит полный поддеревьевый план (598 файлов/2 717 символов/56k LOC) вплоть до отдельных frame_*.txt, то есть атлас способен разворачивать детальную иерархию модулей."],"citation":"shell#target/debug/codex navigator atlas tui"}
{"source":"navigator facet removal","summary":["Facet requests now set inherit_filters + filter_ops so the daemon reuses cached filter stacks, walks parent query_ids, and can drop constraints (languages/categories/recent) without losing context.","CLI и freeform добавили --remove-lang/--no-tests|docs|deps/--no-recent и обновлённое clear-поведение, а документация фиксирует новые сценарии."] ,"citation":"navigator/src/index/mod.rs; navigator/src/planner.rs; navigator/src/freeform.rs; cli/src/code_nav.rs; docs/navigator.md"}
{"source":"navigator contextual ranking","summary":["IndexBuilder теперь тянет git churn (git log --since=30.days) и записывает u32 score в snapshot; heuristic_score умножает clamped churn на 2.5, поэтому горячие файлы всплывают выше.","CLI/tests обновлены: все builder вызовы прокидывают HashMap churn, literal hits наследуют churn, docs описывают новый сигнал."],"citation":"navigator/src/index/git.rs; navigator/src/index/builder.rs; navigator/src/index/mod.rs; navigator/src/index/search.rs; docs/navigator.md"}
{"source":"navigator owner facets","summary":["Navigator парсит CODEOWNERS (root/.github/docs), сохраняет owners в snapshot и возвращает их в hits/facets, так что можно быстро фильтровать по @team без внешних инструментов.","CLI/TUI теперь понимают --owner/remove-owner, активные фильтры и facet summary показывают владельцев; freeform JSON/quick команды тоже поддерживают owner=."] ,"citation":"navigator/src/index/codeowners.rs; navigator/src/index/builder.rs; navigator/src/index/search.rs; cli/src/code_nav.rs; docs/navigator.md"}
{"source":"navigator owner ranking","summary":["heuristic_score получает OWNER_MATCH_BONUS, поэтому запросы с owner-фильтром (CLI/freeform/facet) поднимают нужные файлы в топ без ручного сортинга.","Active filters, facets и literal hits теперь показывают владельцев; документация описывает UX, TUI остаётся минималистичным."] ,"citation":"navigator/src/index/search.rs; navigator/src/proto.rs; docs/navigator.md; tui/src/navigator_view.rs"}
{"source":"navigator lint signals","summary":["IndexBuilder теперь считает lint suppressions (`#[allow(...)]`) и хранит их в snapshot, а heuristic_score штрафует за файлы с множеством отключений linters.","Это создаёт дополнительный сигнал качества, который можно показать в фасетах/подсказках на следующих этапах."],"citation":"navigator/src/index/builder.rs; navigator/src/index/model.rs; navigator/src/index/search.rs"}
{"source":"navigator ranking facets","summary":["IndexBuilder теперь сохраняет freshness_days вместе с attention/lint density, поэтому git recency/TODO сигналы переживают любую пересборку снапшота.","Эти сигналы уже в ходу: heuristic_score бустит свежие/проблемные файлы, штрафует lint-heavy пути, а CLI facets показывают новые freshness/attention бакеты, так что агент видит \"0-1d\" vs \"old\" и \"calm\" vs \"hot\" без дополнительных запросов."],"citation":"navigator/src/index/builder.rs; navigator/src/index/search.rs; cli/src/code_nav.rs"}
{"source":"navigator personal signals","summary":["Navigator считывает активную ветку и план (.agents/current_plan.md или NAVIGATOR_PLAN_PATH), токенизирует ключевые слова и пути и подмешивает их в heuristic_score.","Literal fallback тоже получает bonus за файлы из текущей ветки/плана, поэтому facet-команды сразу попадают в нужные директории без ручного boost."],"citation":"navigator/src/index/personal.rs; navigator/src/index/search.rs; docs/navigator.md"}
{"source":"navigator facet history","summary":["CLI сохраняет последний query_id в queries/history.json и по умолчанию использует его в `codex navigator facet`, поэтому можно просто писать `--lang rust --tests` без ручного --from.","Active filters теперь рендерятся как чипы [lang=..][owner=..], что снижает когнитивную нагрузку и подсказывает, что можно убрать через facet remove."],"citation":"cli/src/nav_history.rs; cli/src/code_nav.rs; docs/navigator.md"}
{"source":"navigator facet history command","summary":["CLI добавил `codex navigator history`, который читает queries/history.json и показывает последние query_id — удобно перед facet/undo.","Facet теперь сам подставляет последний query_id и рисует подсказку, если пользователь не передал --from."],"citation":"cli/src/nav_history.rs; cli/src/code_nav.rs; docs/navigator.md"}
{"source":"navigator history command","summary":["`codex navigator history` показывает последние query_id с индексами и активными фильтрами, а `navigator facet` умеет выбирать записи через --history-index, что избавляет от ручного копирования id.","HistoryStore теперь хранит сами активные фильтры, поэтому CLI может подсказывать какие чипы были включены при прошлых запросах."],"citation":"cli/src/nav_history.rs; cli/src/code_nav.rs; docs/navigator.md"}
{"source":"navigator facet undo","summary":["`codex navigator facet --undo` и `--history-index N` теперь загружают filters из history.json, предварительно очищая состояние фильтров и повторяя нужный слой.","История выводится как список с возрастом и filter-chips, поэтому можно мгновенно понять какой стек фильтров вернёт undo/redo."],"citation":"cli/src/code_nav.rs; cli/src/nav_history.rs; docs/navigator.md"}
{"source":"navigator health telemetry","summary":["HealthStore пишет ingest + literal метрики в health.bin и отдаёт risk/issues прямо в diagnostics/doctor, так что видно задержки и fallback rate без rg.","CLI doctor теперь по умолчанию печатает health-panel (risk, issues, literal долю, последние ingest) и даёт `--json` для сырых данных."],"citation":"navigator/src/index/health.rs; navigator/src/index/mod.rs; cli/src/code_nav.rs; docs/navigator.md"}
{"source":"navigator guardrails","summary":["GuardrailEmitter отслеживает health risk и slow-query, логирует предупреждения и при `NAVIGATOR_GUARDRAIL_WEBHOOK` отправляет JSON (дросселирование через cooldown).","Эти алерты срабатывают при risk ≥ yellow и поисках дольше `NAVIGATOR_GUARDRAIL_LATENCY_MS`, что закрывает пункт 5.3 roadmap без ручного мониторинга."],"citation":"navigator/src/index/guardrail.rs; navigator/src/index/mod.rs; docs/navigator.md; navigator/TODO.md"}
{"source":"navigator self-heal","summary":["Координатор автоматически запускает rebuild_all, если индекс упал в Failed или coverage превысил лимиты pending/errors; частота ограничена cooldown, так что self-heal не зацикливается.","ENV `NAVIGATOR_SELF_HEAL_*` позволяют подкрутить лимиты/интервалы, а roadmap пункт 5.4 помечен выполненным."],"citation":"navigator/src/index/mod.rs; docs/navigator.md; navigator/TODO.md"}
{"source":"navigator profiler","summary":["SearchStats теперь содержит stages (candidate_load, matcher, hit_assembly, references, facets, literal_scan/fallback), а координатор записывает последние сэмплы в памяти.","Добавлены /v1/nav/profile и `codex navigator profile --limit N`, поэтому можно быстро увидеть, куда уходит время без чтения логов."],"citation":"navigator/src/index/search.rs; navigator/src/index/mod.rs; navigator/src/daemon.rs; navigator/src/client.rs; cli/src/code_nav.rs; docs/navigator.md; navigator/TODO.md"}
{"source":"navigator context banner","summary":["SearchResponse теперь несёт context_banner (top layers + categories docs/tests/deps) и CLI печатает блок `context:` сразу после stats.","Это закрывает пункт 7.2 roadmap: пользователю видно распределение хитов по core/tui/docs без ручного подсчёта."],"citation":"navigator/src/index/mod.rs; navigator/src/proto.rs; cli/src/code_nav.rs; docs/navigator.md; navigator/TODO.md"}
{"source":"navigator context banner","summary":["SearchResponse теперь несёт context_banner с топовыми слоями и категориями, IndexCoordinator строит его из NavHit слоёв/категорий и отдаёт клиентам.","CLI печатает блок context: (layers/categories), документация и TODO обновлены, тест `context_banner_summarizes_layers_and_categories` фиксирует статистику.","nav_history store обновлён под новое поле, так что history/undo не ломается."],"citation":"navigator/src/index/mod.rs; navigator/src/proto.rs; cli/src/code_nav.rs; cli/src/nav_history.rs; docs/navigator.md; navigator/TODO.md"}
{"source":"navigator session memory","summary":["History store теперь сохраняет NavigatorSearchArgs + UI-опции, превью топ-хитов и pinned-список.","CLI добавил команды `codex navigator repeat` и `codex navigator pin`, history выводит query preview и отмечает закреплённые запросы.","TODO.md и docs/navigator.md обновлены; тесты nav_history покрывают новые случаи."],"citation":"cli/src/nav_history.rs; cli/src/code_nav.rs; cli/src/main.rs; docs/navigator.md; navigator/TODO.md"}
{"source":"navigator focus mode","summary":["CLI получил --focus (auto/code/docs/tests/deps/all) и новый Focus Mode вывод: текстовые/streaming ответы фильтруют хиты, показывают suppressed-счётчики и уникальные подсказки.","История, pin и repeat сохраняют выбранный фокус; session memory теперь повторяет запросы вместе с режимом и превью хитов.","Документация и TODO обновлены, добавлены unit-тесты для фильтра и авто-инференции."],"citation":"cli/src/code_nav.rs; cli/src/main.rs; cli/src/nav_history.rs; docs/navigator.md; navigator/TODO.md"}
{"source":"navigator command flows","summary":["Добавлены преднастроенные сценарии `codex navigator flow audit-toolchain` и `trace-feature-flag`, которые прогоняют несколько поисков с автоматическим фокусом/refs.","Flow CLI поддерживает dry-run, принимает пользовательский input и использует имеющийся NavigatorClient, так что цепочки запускаются как единое действие.","Документация и TODO обновлены, фокус режим теперь часть flow истории, тесты и format/lint пройдены."],"citation":"cli/src/code_nav.rs; cli/src/nav_history.rs; cli/src/main.rs; docs/navigator.md; navigator/TODO.md"}
{"source":"navigator eval harness","summary":["Добавлен `codex navigator eval` для прогона JSON-сценариев с ожиданиями по рангу, проверяет попадание файлов и может сохранять snapshots.","Eval case формат описывает query + фильтры + ожидания; выполнение использует NavigatorClient напрямую, выводит PASS/FAIL и возвращает ошибку при несоответствии.","Документация и TODO обновлены, так что эпик 3.4 (Evaluation harness) отмечен как выполненный."],"citation":"cli/src/code_nav.rs; cli/src/main.rs; docs/navigator.md; navigator/TODO.md"}
{"source":"atlas owners + eval","summary":["Atlas узлы теперь агрегируют churn и топ-владельцев по каждому сегменту, CLI/atlas summary выводят эти метрики.","Запущен `codex navigator eval` для проверки ранжирования через JSON-кейсы с optional snapshots."],"citation":"navigator/src/atlas.rs; navigator/src/proto.rs; cli/src/code_nav.rs; cli/src/main.rs; docs/navigator.md; navigator/TODO.md"}

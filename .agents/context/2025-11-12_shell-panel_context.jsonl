{"source":"PLAN.md","summary":["Background shell manager lets commands stay foreground up to 60s, supports manual Ctrl+R background requests, tracks processes in a unified registry with ended_by metadata, and exposes minimal shell_* tools","TUI must show one English ShellCard per process plus a fullscreen [Shell] panel with tabs, table navigation, diagnostics/kill/resume shortcuts, and explicit Ctrl+R hints","Migration proceeds through core/protocol, CLI agent, TUI, cleanup phases with success metrics including cargo test -p codex-tui/-core and cargo test --all-features"],"citation":"PLAN.md:3-119"}
{"source":"shell_panel_demo.py","summary":["Curses prototype renders RUNNING/COMPLETED/FAILED tabs backed by static mock data and navigable with arrow keys","Detail screen shows status, timestamps, ended_by, and scrollable logs with option to copy log to a temp file","Key bindings for kill/diagnostics/resume are stubbed, demonstrating where backend hooks must integrate"],"citation":"shell_panel_demo.py:1-140"}
{"source": "codex-rs/core/src/background_shell/mod.rs", "summary": ["Removed the last unwrap() usage in register_process/kill_process so shell events dispatch even if state is missing and kill uses a single mutable borrow", "Added tokio tests that register mock shells, assert kill_process emits Terminated events, and ensure prepare_resume resets completed shells plus re-exported session factory helpers"], "citation": "codex-rs/core/src/background_shell/mod.rs:220-430"}
{"source": "codex-rs/exec/src/event_processor_with_human_output.rs", "summary": ["CLI background stream now detects shell_event payloads, prints a colored [shell id] header with status/ended_by/exit metadata, and dumps recent log lines while keeping dimmed fallback for plain background messages"], "citation": "codex-rs/exec/src/event_processor_with_human_output.rs:1-260"}
